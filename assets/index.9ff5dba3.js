const w=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}};w();const m=e=>{const n=document.createElement("canvas"),o=n.getContext("2d");return{element:n,context:o,setSize(r,t){this.element.width=r,this.element.height=t}}},i=(e=0,n=0)=>({x:e,y:n,add(o){return i(this.x+o.x,this.y+o.y)},dot(o){return this.x*o.x+this.y*o.y},length(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize(){let o=this.length();o!=0&&(this.x/=o,this.y/=o)},normalized(){return this.normalize(),this},scalar(o){return i(this.x*o,this.y*o)}}),y=(e,n,o,r)=>({radius:e,speed:n,color:o,position:r,velocity:i(),render(t){t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,0),t.fillStyle=this.color,t.shadowColor=this.color,t.fill(),t.closePath()}}),d={position:i(innerWidth/2,innerHeight/2),isDown:!1},c={w:!1,a:!1,s:!1,d:!1},a=(()=>({isDown(e){return c[e]},setDown(e){c[e]=!0},setUp(e){c[e]=!1},setMousePositon(e,n){d.position=i(e,n)},getMousePositon(){return d.position},setMouseDown(){d.isDown=!0},setMouseUp(){d.isDown=!1},mouseIsDown(){return d.isDown}}))(),u=25,f=i(innerWidth/2-u,innerHeight/2-u),v=300,g="#FF0",h={w:i(0,-1),s:i(0,1),d:i(1,0),a:i(-1,0)},E=()=>{const e=y(u,v,g,f);return e.move=n=>{for(let o in h)a.isDown(o)&&(e.velocity=e.velocity.add(h[o]));e.velocity=e.velocity.normalized().scalar(e.speed),e.position=e.position.add(e.velocity.scalar(n)),e.velocity=i()},e.shoot=()=>{a.mouseIsDown()&&console.log("Shooting...")},e.update=n=>{e.move(n),e.shoot()},e.draw=n=>e.render(n),e},L=()=>{const e=E();return{player:e,update(n){e.update(n)},draw(n){n.clearRect(0,0,window.innerWidth,window.innerHeight),this.player.draw(n)}}},D=({key:e})=>a.setDown(e),P=({key:e})=>a.setUp(e),M=({clientX:e,clientY:n})=>{a.setMousePositon(e,n)},S=()=>a.setMouseDown(),I=()=>a.setMouseUp();(function(){const n=document.querySelector("#app"),o=m(),r=L();let t=null;o.setSize(innerWidth,innerHeight),n.appendChild(o.element);const s=l=>{t===null&&(t=l);const p=(l-t)*.001;t=l,r.update(p),r.draw(o.context),window.requestAnimationFrame(s)};window.requestAnimationFrame(s),window.addEventListener("resize",()=>{o.setSize(innerWidth,innerHeight)}),window.addEventListener("keydown",D),window.addEventListener("keyup",P),window.addEventListener("mousemove",M),window.addEventListener("mousedown",S),window.addEventListener("mouseup",I)})();
