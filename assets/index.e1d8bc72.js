const T=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};T();const S=e=>{const i=document.createElement("canvas"),t=i.getContext("2d");return{element:i,context:t,setSize(r,s){this.element.width=r,this.element.height=s}}},l=(e=0,i=0)=>({x:e,y:i,add(t){return l(this.x+t.x,this.y+t.y)},angle(){return Math.atan2(this.y,this.x)},angleToPoint(t){return t.sub(this).angle()},distanceTo(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},dot(t){return this.x*t.x+this.y*t.y},length(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize(){let t=this.length();t!=0&&(this.x/=t,this.y/=t)},normalized(){return this.normalize(),this},scalar(t){return l(this.x*t,this.y*t)},sub(t){return l(this.x-t.x,this.y-t.y)}}),y=(e,i,t,r,s)=>({radius:e,speed:i,color:t,blur:r,position:s,velocity:l(),render(o){o.beginPath(),o.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,0),o.fillStyle=this.color,o.shadowColor=this.color,o.shadowBlur=this.blur,o.fill(),o.closePath()}}),A=15,M=5,R=700,D=1.5,I="#ffdd59",O=(e,i)=>{const t=y(A,R,I,M,e);return t.lifeTime=D,t.direction=e.angleToPoint(i),t.velocity=l(Math.cos(t.direction),Math.sin(t.direction)),t.velocity=t.velocity.scalar(t.speed),t.update=r=>{t.lifeTime-=r,t.position=t.position.add(t.velocity.scalar(r))},t.draw=r=>t.render(r),t},u={position:l(innerWidth/2,innerHeight/2),isDown:!1},E={w:!1,a:!1,s:!1,d:!1,Escape:!1,Enter:!1},d=(()=>({isDown(e){return E[e]},setDown(e){E[e]=!0},setUp(e){E[e]=!1},setMousePositon(e,i){u.position=l(e,i)},getMousePosition(){return u.position},setMouseDown(){u.isDown=!0},setMouseUp(){u.isDown=!1},mouseIsDown(){return u.isDown}}))(),m=30,_=15,Y=10,b=.25/2,B=l(innerWidth/2-m,innerHeight/2-m),C=300,U="#ffdd59",w={w:l(0,-1),s:l(0,1),d:l(1,0),a:l(-1,0)},N=e=>e.lifeTime>0,v=()=>{const e=y(m,C,U,_,B);return e.bullets=[],e.lastShot=null,e.health=Y,e.isAlive=!0,e.score=0,e.increaseScore=()=>{e.score++},e.damage=()=>{if(e.health<=0){e.isAlive=!1;return}e.health--},e.move=i=>{for(let t in w)d.isDown(t)&&(e.velocity=e.velocity.add(w[t]));e.velocity=e.velocity.normalized().scalar(e.speed),e.position=e.position.add(e.velocity.scalar(i)),e.velocity=l()},e.shoot=()=>{let i=performance.now()*.001;if(e.lastShot===null&&(e.lastShoot=i),d.mouseIsDown()){let t=d.getMousePosition(),r=l(e.position.x,e.position.y);if(i-e.lastShot>b){let s=O(r,t);e.bullets.push(s),e.lastShot=i}}},e.updateBullets=i=>{e.bullets.forEach(t=>{t.update(i)}),e.bullets=e.bullets.filter(N)},e.renderBullets=i=>{e.bullets.forEach(t=>{t.render(i)})},e.update=i=>{e.move(i),e.shoot(),e.updateBullets(i)},e.draw=i=>{e.render(i),e.renderBullets(i)},e},k=30,H=15,x=150,W="#ff4757",F=e=>{const i=y(k,x,W,H,e);return i.isAlive=!0,i.velocity=l(),i.update=(t,r)=>{let s=i.position.angleToPoint(r);i.velocity=l(Math.cos(s),Math.sin(s)),i.velocity=i.velocity.scalar(i.speed).scalar(t),i.position=i.position.add(i.velocity)},i.draw=t=>i.render(t),i},h=(e,i="#FFF",t=0,r)=>({value:e,color:i,blur:t,position:r,render(s){s.fillStyle=this.color,s.shadowColor=this.color,s.shadowBlur=this.blur,s.font="22px 'Press Start 2P'",s.fillText(this.value,this.position.x,this.position.y)}}),z=(()=>({draw(e,i,t){let r=h(`Health: ${i}`,"#ffdd59",0,l(30,80)),s=h(`Score: ${t}`,"#ffdd59",1,l(30,120));r.render(e),s.render(e)}}))(),K=(()=>({randomInRange(e=0,i=1){return Math.random()*(i-e)+e}}))(),f=1,P=1500,G=1.01,q=.25/2,$=e=>e.isAlive,X=()=>{let e=v(),i=[],t=f,r=f,s=!1,o=null,a=!1;return{player:e,spawnEnemy(){let n=K.randomInRange(0,2*Math.PI),c=l(P*Math.cos(n),P*Math.sin(n));i.push(F(c))},checkGameOver(){e.health<1&&(a=!0)},checkSpawnEnemy(n){t-=n,t<=0&&(this.spawnEnemy(),t=r,r/=G)},checkBulletCollision(){i.forEach(n=>{n.isAlive&&e.bullets.forEach(c=>{n.position.distanceTo(c.position)<=c.radius+n.radius&&(c.lifeTime=0,n.isAlive=!1,e.increaseScore())})})},checkPlayerCollision(){i.forEach(n=>{n.isAlive&&n.position.distanceTo(e.position)<=e.radius+n.radius&&(e.damage(),n.isAlive=!1)})},checkKeyPressed(){let n=performance.now()*.001;o===null&&(o=n),!(n-o<q)&&(d.isDown("Escape")&&!a?s=!s:d.isDown("Enter")&&a&&this.restart(),o=n)},restart(){e=v(),i=[],t=f,r=f,s=!1,a=!1},update(n){this.checkKeyPressed(),!(s||a)&&(this.checkGameOver(),this.checkSpawnEnemy(n),this.checkBulletCollision(),this.checkPlayerCollision(),i=i.filter($),i.forEach(c=>{c.update(n,e.position)}),e.update(n))},drawGameOver(n){let c=l(innerWidth/2-400,innerHeight/2),p=h("Game Over (Press enter to continue)","#000",0,c),g=l(innerWidth/2-400,innerHeight/2+50),L=h(`You Scored: ${e.score}`,"#000",0,g);n.fillRect(0,0,innerWidth,innerHeight),p.render(n),L.render(n)},drawPaused(n){let c=l(innerWidth/2-400,innerHeight/2),p=h("Game Paused (Press esc to continue)","#000",0,c);n.fillRect(0,0,innerWidth,innerHeight),p.render(n)},draw(n){if(n.clearRect(0,0,window.innerWidth,window.innerHeight),i.forEach(c=>{c.draw(n)}),e.draw(n),z.draw(n,e.health,e.score),s){this.drawPaused(n);return}if(a){this.drawGameOver(n);return}}}},j=({key:e})=>d.setDown(e),J=({key:e})=>d.setUp(e),Q=({clientX:e,clientY:i})=>{d.setMousePositon(e,i)},V=()=>d.setMouseDown(),Z=()=>d.setMouseUp();(function(){const i=document.querySelector("#app"),t=S(),r=X();let s=null;t.setSize(innerWidth,innerHeight),i.appendChild(t.element);const o=a=>{s===null&&(s=a);const n=(a-s)*.001;s=a,r.update(n),r.draw(t.context),window.requestAnimationFrame(o)};window.requestAnimationFrame(o),window.addEventListener("resize",()=>{t.setSize(innerWidth,innerHeight)}),window.addEventListener("keydown",j),window.addEventListener("keyup",J),window.addEventListener("mousemove",Q),window.addEventListener("mousedown",V),window.addEventListener("mouseup",Z)})();
