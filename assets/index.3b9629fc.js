const y=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}};y();const m=e=>{const n=document.createElement("canvas"),t=n.getContext("2d");return{element:n,context:t,setSize(s,o){this.element.width=s,this.element.height=o}}},r=(e=0,n=0)=>({x:e,y:n,add(t){return r(this.x+t.x,this.y+t.y)},angle(){return Math.atan2(this.y,this.x)},angleToPoint(t){return t.sub(this).angle()},dot(t){return this.x*t.x+this.y*t.y},length(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize(){let t=this.length();t!=0&&(this.x/=t,this.y/=t)},normalized(){return this.normalize(),this},scalar(t){return r(this.x*t,this.y*t)},sub(t){return r(this.x-t.x,this.y-t.y)}}),h=(e,n,t,s)=>({radius:e,speed:n,color:t,position:s,velocity:r(),render(o){o.beginPath(),o.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,0),o.fillStyle=this.color,o.shadowColor=this.color,o.fill(),o.closePath()}}),w=15,v=900,L=1.5,g="#FF0",E=(e,n)=>{const t=h(w,v,g,e);return t.lifeTime=L,t.direction=e.angleToPoint(n),t.velocity=r(Math.cos(t.direction),Math.sin(t.direction)),t.velocity=t.velocity.scalar(t.speed),t.update=s=>{t.lifeTime-=s,t.position=t.position.add(t.velocity.scalar(s))},t.draw=s=>t.render(s),t},u={position:r(innerWidth/2,innerHeight/2),isDown:!1},d={w:!1,a:!1,s:!1,d:!1},l=(()=>({isDown(e){return d[e]},setDown(e){d[e]=!0},setUp(e){d[e]=!1},setMousePositon(e,n){u.position=r(e,n)},getMousePosition(){return u.position},setMouseDown(){u.isDown=!0},setMouseUp(){u.isDown=!1},mouseIsDown(){return u.isDown}}))(),c=25,P=.25/2,D=r(innerWidth/2-c,innerHeight/2-c),M=300,S="#FF0",p={w:r(0,-1),s:r(0,1),d:r(1,0),a:r(-1,0)},b=e=>e.lifeTime>0,I=()=>{const e=h(c,M,S,D);return e.bullets=[],e.lastShot=null,e.move=n=>{for(let t in p)l.isDown(t)&&(e.velocity=e.velocity.add(p[t]));e.velocity=e.velocity.normalized().scalar(e.speed),e.position=e.position.add(e.velocity.scalar(n)),e.velocity=r()},e.shoot=()=>{let n=performance.now()*.001;if(e.lastShot===null&&(e.lastShoot=n),l.mouseIsDown()){let t=l.getMousePosition(),s=r(e.position.x,e.position.y);if(n-e.lastShot>P){let o=E(s,t);e.bullets.push(o),e.lastShot=n}}},e.updateBullets=n=>{for(let t of e.bullets)t.update(n);e.bullets=e.bullets.filter(b)},e.renderBullets=n=>{for(let t of e.bullets)t.render(n)},e.update=n=>{e.move(n),e.shoot(),e.updateBullets(n)},e.draw=n=>{e.render(n),e.renderBullets(n)},e},T=()=>{const e=I();return{player:e,update(n){e.update(n)},draw(n){n.clearRect(0,0,window.innerWidth,window.innerHeight),this.player.draw(n)}}},A=({key:e})=>l.setDown(e),O=({key:e})=>l.setUp(e),x=({clientX:e,clientY:n})=>{l.setMousePositon(e,n)},R=()=>l.setMouseDown(),U=()=>l.setMouseUp();(function(){const n=document.querySelector("#app"),t=m(),s=T();let o=null;t.setSize(innerWidth,innerHeight),n.appendChild(t.element);const i=a=>{o===null&&(o=a);const f=(a-o)*.001;o=a,s.update(f),s.draw(t.context),window.requestAnimationFrame(i)};window.requestAnimationFrame(i),window.addEventListener("resize",()=>{t.setSize(innerWidth,innerHeight)}),window.addEventListener("keydown",A),window.addEventListener("keyup",O),window.addEventListener("mousemove",x),window.addEventListener("mousedown",R),window.addEventListener("mouseup",U)})();
